# Code Voice Assistant

Code Voice Assistant is a Node.js and VS Code extension project that lets you generate code snippets using your voice. It records your speech, transcribes it using OpenAI Whisper, sends the prompt to OpenAI (or Copilot), and inserts the generated code into your active VS Code editor.

---

## Installation

1. **Clone the repository:**

   ```sh
   git clone <your-repo-url>
   cd Speech to Code
   ```

2. **Install dependencies:**

   ```sh
   npm install
   ```

3. **Set up API keys:**

   - Copy `.env.example` to `.env` and fill in your OpenAI API key and Whisper API key (can be the same key):

     ```sh
     cp .env.example .env
     # Edit .env and add your keys
     ```

   - Example `.env`:
     ```
     OPENAI_API_KEY=your_openai_api_key_here
     WHISPER_API_KEY=your_whisper_api_key_here
     ```

4. **(Linux only) Make sure `arecord` is installed:**

   ```sh
   sudo apt-get install alsa-utils
   ```

5. **Setup**

   - Do not commit your `.env` file or `input.wav`â€”these are ignored by `.gitignore`.

---

## Usage

### As a Node.js Script

Run the assistant from the terminal:

```sh
node index.js
```

- Speak your coding request when prompted.
- Example:  
  **"create a REST API for login"**
- The recognized prompt and generated code will be shown in the console.

### As a VS Code Extension

1. Open the project folder in VS Code.
2. Press `F5` to launch the extension in a new Extension Development Host window.
3. Open a file and place your cursor where you want the code.
4. Open the Command Palette (`Ctrl+Shift+P`) and run:
   ```
   Code Voice Assistant: Generate Code from Voice
   ```
5. Speak your coding request (e.g., "create a REST API for login").
6. The recognized prompt and generated code will be inserted at your cursor position.

---

## Example Commands

- **"create a REST API for login"**
- **"generate a Python class for user authentication"**
- **"write a function to sort an array in JavaScript"**

---

## Troubleshooting

- Make sure your microphone is working and `arecord` is installed (Linux only).
- Ensure your API keys are set in the `.env` file.
- If you see permission errors, try running VS Code or your terminal as administrator.
- If you see `401` or quota errors, check your OpenAI billing and quota.
- If you see audio recording errors, test `arecord` manually in your terminal.

---

## Project Structure

```
.env.example      # Example environment file (do not commit .env)
.gitignore        # Ignores .env, input.wav, node_modules
copilot.js        # Handles code generation via OpenAI API
extension.js      # VS Code extension entry point
index.js          # Node.js CLI entry point
input.wav         # Temporary audio file
package.json      # Project metadata and dependencies
README.md         # Documentation
speech.js         # Handles audio recording and transcription
.vscode/          # VS Code debug configuration
```

---

## Notes

- The assistant records up to 5 seconds of audio for each prompt (configurable in `speech.js`).
- The recorded audio file (`input.wav`) is preserved after each run.
- The project supports both CLI and VS Code extension usage.
- API keys are loaded from `.env` using `dotenv`.

---

## Demo

Below are sample voice commands and the code snippets generated by the Code Voice Assistant.

---

### 1. Voice Command

**"Create a REST API for login in Express.js"**

**Generated Code:**

```javascript
const express = require("express");
const app = express();
app.use(express.json());

app.post("/login", (req, res) => {
  const { username, password } = req.body;
  // Authenticate user logic here
  if (username === "admin" && password === "secret") {
    res.json({ success: true, token: "abc123" });
  } else {
    res.status(401).json({ success: false, message: "Invalid credentials" });
  }
});

app.listen(3000, () => console.log("Server running on port 3000"));
```

---

### 2. Voice Command

**"Generate a Python class for user authentication"**

**Generated Code:**

```python
class UserAuth:
    def __init__(self, username, password):
        self.username = username
        self.password = password

    def authenticate(self, input_username, input_password):
        return self.username == input_username and self.password == input_password
```

---

### 3. Voice Command

**"Write a function to sort an array in JavaScript"**

**Generated Code:**

```javascript
function sortArray(arr) {
  return arr.sort((a, b) => a - b);
}
```

---

These examples show how Code Voice Assistant can quickly turn spoken coding requests into ready-to-use code snippets, streamlining the development process.
